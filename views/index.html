<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Get Dishes</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <script src="/scripts.js"></script>
  </head>
  <body>
    <br>
    <div class="container">
        <h1>Lista Platos</h1>
        <table class="table">
            <thead>
                <tr>
                    <th>Id</th>
                    <th>IdDish</th>
                    <th>Name</th>
                    <th>Calories</th>
                    <th>IsVegetarian</th>
                    <th>Value</th>
                    <th>Comments</th>
                </tr>
            </thead>
            <tbody id="body">
                <script>
                    loadDishes()
                    .then( resp => {
                        if( resp.state ){
                            resp.data.forEach( dish => {
                                const row = document.createElement("tr")
                                const colId = document.createElement("td")
                                colId.append( document.createTextNode(`${dish._id}`))
                                row.append(colId)

                                const colIdDish = document.createElement("td")
                                colIdDish.append( document.createTextNode(`${dish.idDish}`))
                                row.append(colIdDish)

                                const colName = document.createElement("td")
                                colName.append( document.createTextNode(`${dish.name}`))
                                row.append(colName)

                                const colCalories = document.createElement("td")
                                colCalories.append( document.createTextNode(`${dish.calories}`))
                                row.append(colCalories)

                                const colIsVegetarian = document.createElement("td")
                                colIsVegetarian.append( document.createTextNode(`${dish.isVegetarian}`))
                                row.append(colIsVegetarian)

                                const colIsValue = document.createElement("td")
                                colIsValue.append( document.createTextNode(`${dish.value}`))
                                row.append(colIsValue)

                                const colComments = document.createElement("td")
                                colComments.append( document.createTextNode(`${dish.comments}`))
                                row.append(colComments)
                                document.getElementById("body").append(row)
                            })
                        }else{
                            console.log("Something gone wrong!!")
                        }     
                    })
                    .catch( err => console.log(err))
                </script>

            </tbody>
        </table>
        <div class="input-group mb-3">
            <div class="input-group-prepend">
              <span class="input-group-text" id="basic-addon1"></span>
            </div>
            <input id="inputGet" type="text" class="form-control" placeholder="Id" aria-label="Username" aria-describedby="basic-addon1">
        </div>
        <div class="row">
            <button class="btn btn-primary" id="btnFind">Find Dish</button>
            <button class="btn btn-danger ml-2" id="btnDelete">Delete Dish</button>
        </div>
        <div id="dishData" class="mt-3"></div>
        <a href="/getAddDish" class="btn btn-secondary col-12"> Add Dish</a>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
  </body>
</html>